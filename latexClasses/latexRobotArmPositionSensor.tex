\begin{lstlisting}[fontadjust, mathescape, frame=tlb] 
class RobotArmPositionSensor
    inherits PositionSensor

    temporal domain integer;$

    visible position, link3, link2, endEffector, pickedUp, holding, dropped;$

    modules Grid:$ Grid;$

    TD items
        predicates
            -- link3 is the first segment of the arm from the body of the robot
            link3({ L0, L1, L2, L3, L4, L5, L6, L7, L8, L9,
                 L10, L11, L12, L13, L14, L15, L16, L17, L18, L19,
                 L20, L21, L22, L23, L24, L25, L26, L27, L28}),
            -- link2 is the second segment of the arm, linked to link3 and link1
            link2({ L0, L1, L2, L3, L4, L5, L6, L7, L8, L9,
                 L10, L11, L12, L13, L14, L15, L16, L17, L18, L19,
                 L20, L21, L22, L23, L24, L25, L26, L27, L28}),
            -- link1 is the third segment of the arm, which is linked to link2 and holds the end effector
            link1({ L0, L1, L2, L3, L4, L5, L6, L7, L8, L9,
                 L10, L11, L12, L13, L14, L15, L16, L17, L18, L19,
                 L20, L21, L22, L23, L24, L25, L26, L27, L28}),
            -- end effector is the "hand" of the robot
            endEffector({ L0, L1, L2, L3, L4, L5, L6, L7, L8, L9,
                 L10, L11, L12, L13, L14, L15, L16, L17, L18, L19,
                 L20, L21, L22, L23, L24, L25, L26, L27, L28}),
            -- signal if the pick action has been completed successfully
            pickedUp(),

            -- signal to model the fact that the robot is holding a piece
            holding(),

            -- signal to model the fact that the robot has dropped the piece it was holding
            dropped();$

            -- is the operator touching the arm of the robot?
            contact();$

    axioms:$

        -- position is all the cells that are occupied by the arm
        armPosition:$ \forall x (position(x) \iff link2(x) || link1(x));$
        
        -- link 2 is connected to link3
        connection32:$ \forall x \forall y (link2(x) \limply link3(x) ||
            (x != y \land link3(y) \land Grid.adjacent(x, y)));$

        -- link1 is connected to link2
        connection21:$ \forall x \forall y (link1(x) \limply link2(x) ||
            (x != y \land link2(y) \land Grid.adjacent(x, y)));$

        -- end effector is on link1
        endEffectorOnLink1:$ \forall x (endEffector(x) \iff link1(x));$

        -- link2 is unique
        uniqueLink2:$ \forall x \forall y (x != y \land link2(x) \limply \neg \link2(y));$

        -- link1 is unique
        uniqueLink1:$ \forall x \forall y (x != y \land link1(x) \limply \neg \link1(y));$

        -- end effector occupies only one position at a time
        only1EndEffector:$
            \forall x (endEffector(x) \iff \neg \exists y (x != y \land endEffector(y)));$

        -- only one of pickedUp(), holding() and dropped() can be true in each instant
        onlyOne:$
            (pickedUp() \limply \neg holding() \land \neg dropped())
            \land
            (holding() \limply \neg pickedUp() \land \neg dropped())
            \land
            (dropped() \limply \neg pickedUp() \land \neg holding());$

        -- holding() holds between pickedUp() and dropped()
        \becomes(\neg pickedUp()) \land \until(holding(), dropped());$

end RobotArmPositionSensor.\end{lstlisting}